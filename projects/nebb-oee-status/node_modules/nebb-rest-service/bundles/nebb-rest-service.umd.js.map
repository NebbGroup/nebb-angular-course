{"version":3,"file":"nebb-rest-service.umd.js.map","sources":["ng://nebb-rest-service/lib/resource.service.ts","ng://nebb-rest-service/lib/resource.model.ts","ng://nebb-rest-service/lib/nebb-rest-service.module.ts","ng://nebb-rest-service/lib/query-options.ts"],"sourcesContent":["import { HttpClient } from '@angular/common/http';\r\nimport { Observable, of } from 'rxjs';\r\nimport { Serializer } from './serializer';\r\nimport { catchError, tap } from 'rxjs/operators';\r\nimport { QueryOptions } from './query-options';\r\nimport { Resource } from './resource.model';\r\n\r\nexport class ResourceService<T extends Resource> {\r\n  constructor(\r\n    private httpClient: HttpClient,\r\n    private url: string,\r\n    private endpoint: string,\r\n    private serializer: Serializer\r\n  ) {}\r\n\r\n  public create(item: T): Observable<T> {\r\n    return this.httpClient\r\n      .post<T>(`${this.url}/${this.endpoint}`, this.serializer.toJson(item))\r\n      .pipe(catchError(this.handleError('create', item)));\r\n  }\r\n\r\n  public update(item: T): Observable<T> {\r\n    return this.httpClient\r\n      .put<T>(\r\n        `${this.url}/${this.endpoint}/${item.id}`,\r\n        this.serializer.toJson(item)\r\n      )\r\n      .pipe(catchError(this.handleError('update', item)));\r\n  }\r\n\r\n  get(id: number): Observable<T> {\r\n    return this.httpClient.get<T>(`${this.url}/${this.endpoint}/${id}`);\r\n  }\r\n\r\n  list(queryOptions: QueryOptions): Observable<T[]> {\r\n    return this.httpClient\r\n      .get<T[]>(`${this.url}/${this.endpoint}?${queryOptions.toQueryString()}`)\r\n      .pipe(\r\n        tap(t => this.log(`fetched data`))\r\n      );\r\n  }\r\n\r\n  delete(id: number) {\r\n    return this.httpClient.delete(`${this.url}/${this.endpoint}/${id}`).pipe(\r\n      tap(t => this.log(`fetched data`)),\r\n      catchError(this.handleError('delete'))\r\n    );\r\n  }\r\n\r\n  private handleError(operation = 'operation', result?: T) {\r\n    return (error: any): Observable<T> => {\r\n      console.error(error);\r\n      this.log(`${operation} failed: ${error.message}`);\r\n      return of(result as T);\r\n    };\r\n  }\r\n\r\n  private log(message: string) {\r\n    console.log('Resource.service: ' + message);\r\n  }\r\n}\r\n","export class Resource {\r\n  id: number;\r\n  parentId?: number;\r\n\r\n  constructor(values: Object = {}) {\r\n    Object.assign(this, values);\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\n\n\n@NgModule({\n  imports: [\n  ],\n  declarations: [],\n  exports: []\n})\nexport class NebbRestServiceModule { }\n","import { QueryBuilder } from './query-builder';\r\n\r\nexport class QueryOptions implements QueryBuilder {\r\n  public pageNumber: number;\r\n  public pageSize: number;\r\n\r\n  constructor() {\r\n    this.pageNumber = 1;\r\n    this.pageSize = 10000;\r\n  }\r\n\r\n  toQueryMap() {\r\n    const queryMap = new Map<string, string>();\r\n    queryMap.set('pageNumber', `${this.pageNumber}`);\r\n    queryMap.set('pageSize', `${this.pageSize}`);\r\n\r\n    return queryMap;\r\n  }\r\n\r\n  toQueryString() {\r\n    let queryString = '';\r\n    this.toQueryMap().forEach((value: string, key: string) => {\r\n      queryString = queryString.concat(`${key}=${value}&`);\r\n    });\r\n\r\n    return queryString.substring(0, queryString.length - 1);\r\n  }\r\n}\r\n"],"names":["catchError","tap","of","NgModule"],"mappings":"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"}
