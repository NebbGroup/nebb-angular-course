{"version":3,"file":"nebb-rest-service.js.map","sources":["ng://nebb-rest-service/lib/resource.service.ts","ng://nebb-rest-service/lib/resource.model.ts","ng://nebb-rest-service/lib/nebb-rest-service.module.ts","ng://nebb-rest-service/lib/query-options.ts"],"sourcesContent":["import { HttpClient } from '@angular/common/http';\r\nimport { Observable, of } from 'rxjs';\r\nimport { Serializer } from './serializer';\r\nimport { catchError, tap } from 'rxjs/operators';\r\nimport { QueryOptions } from './query-options';\r\nimport { Resource } from './resource.model';\r\n\r\nexport class ResourceService<T extends Resource> {\r\n  constructor(\r\n    private httpClient: HttpClient,\r\n    private url: string,\r\n    private endpoint: string,\r\n    private serializer: Serializer\r\n  ) {}\r\n\r\n  public create(item: T): Observable<T> {\r\n    return this.httpClient\r\n      .post<T>(`${this.url}/${this.endpoint}`, this.serializer.toJson(item))\r\n      .pipe(catchError(this.handleError('create', item)));\r\n  }\r\n\r\n  public update(item: T): Observable<T> {\r\n    return this.httpClient\r\n      .put<T>(\r\n        `${this.url}/${this.endpoint}/${item.id}`,\r\n        this.serializer.toJson(item)\r\n      )\r\n      .pipe(catchError(this.handleError('update', item)));\r\n  }\r\n\r\n  get(id: number): Observable<T> {\r\n    return this.httpClient.get<T>(`${this.url}/${this.endpoint}/${id}`);\r\n  }\r\n\r\n  list(queryOptions: QueryOptions): Observable<T[]> {\r\n    return this.httpClient\r\n      .get<T[]>(`${this.url}/${this.endpoint}?${queryOptions.toQueryString()}`)\r\n      .pipe(\r\n        tap(t => this.log(`fetched data`))\r\n      );\r\n  }\r\n\r\n  delete(id: number) {\r\n    return this.httpClient.delete(`${this.url}/${this.endpoint}/${id}`).pipe(\r\n      tap(t => this.log(`fetched data`)),\r\n      catchError(this.handleError('delete'))\r\n    );\r\n  }\r\n\r\n  private handleError(operation = 'operation', result?: T) {\r\n    return (error: any): Observable<T> => {\r\n      console.error(error);\r\n      this.log(`${operation} failed: ${error.message}`);\r\n      return of(result as T);\r\n    };\r\n  }\r\n\r\n  private log(message: string) {\r\n    console.log('Resource.service: ' + message);\r\n  }\r\n}\r\n","export class Resource {\r\n  id: number;\r\n  parentId?: number;\r\n\r\n  constructor(values: Object = {}) {\r\n    Object.assign(this, values);\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\n\n\n@NgModule({\n  imports: [\n  ],\n  declarations: [],\n  exports: []\n})\nexport class NebbRestServiceModule { }\n","import { QueryBuilder } from './query-builder';\r\n\r\nexport class QueryOptions implements QueryBuilder {\r\n  public pageNumber: number;\r\n  public pageSize: number;\r\n\r\n  constructor() {\r\n    this.pageNumber = 1;\r\n    this.pageSize = 10000;\r\n  }\r\n\r\n  toQueryMap() {\r\n    const queryMap = new Map<string, string>();\r\n    queryMap.set('pageNumber', `${this.pageNumber}`);\r\n    queryMap.set('pageSize', `${this.pageSize}`);\r\n\r\n    return queryMap;\r\n  }\r\n\r\n  toQueryString() {\r\n    let queryString = '';\r\n    this.toQueryMap().forEach((value: string, key: string) => {\r\n      queryString = queryString.concat(`${key}=${value}&`);\r\n    });\r\n\r\n    return queryString.substring(0, queryString.length - 1);\r\n  }\r\n}\r\n"],"names":[],"mappings":"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"}
