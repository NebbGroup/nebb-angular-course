{"version":3,"file":"nebb-rest-service.js.map","sources":["ng://nebb-rest-service/lib/resource.service.ts","ng://nebb-rest-service/lib/resource.model.ts","ng://nebb-rest-service/lib/nebb-rest-service.module.ts","ng://nebb-rest-service/lib/query-options.ts"],"sourcesContent":["import { HttpClient } from '@angular/common/http';\r\nimport { Observable, of } from 'rxjs';\r\nimport { Serializer } from './serializer';\r\nimport { catchError, tap } from 'rxjs/operators';\r\nimport { QueryOptions } from './query-options';\r\nimport { Resource } from './resource.model';\r\n\r\nexport class ResourceService<T extends Resource> {\r\n  constructor(\r\n    private httpClient: HttpClient,\r\n    private url: string,\r\n    private endpoint: string,\r\n    private serializer: Serializer\r\n  ) {}\r\n\r\n  public create(item: T): Observable<T> {\r\n    return this.httpClient\r\n      .post<T>(`${this.url}/${this.endpoint}`, this.serializer.toJson(item))\r\n      .pipe(catchError(this.handleError('create', item)));\r\n  }\r\n\r\n  public update(item: T): Observable<T> {\r\n    return this.httpClient\r\n      .put<T>(\r\n        `${this.url}/${this.endpoint}/${item.id}`,\r\n        this.serializer.toJson(item)\r\n      )\r\n      .pipe(catchError(this.handleError('update', item)));\r\n  }\r\n\r\n  get(id: number): Observable<T> {\r\n    return this.httpClient.get<T>(`${this.url}/${this.endpoint}/${id}`);\r\n  }\r\n\r\n  list(queryOptions: QueryOptions): Observable<T[]> {\r\n    return this.httpClient\r\n      .get<T[]>(`${this.url}/${this.endpoint}?${queryOptions.toQueryString()}`)\r\n      .pipe(\r\n        tap(t => this.log(`fetched data`))\r\n      );\r\n  }\r\n\r\n  delete(id: number) {\r\n    return this.httpClient.delete(`${this.url}/${this.endpoint}/${id}`).pipe(\r\n      tap(t => this.log(`fetched data`)),\r\n      catchError(this.handleError('delete'))\r\n    );\r\n  }\r\n\r\n  private handleError(operation = 'operation', result?: T) {\r\n    return (error: any): Observable<T> => {\r\n      console.error(error);\r\n      this.log(`${operation} failed: ${error.message}`);\r\n      return of(result as T);\r\n    };\r\n  }\r\n\r\n  private log(message: string) {\r\n    console.log('Resource.service: ' + message);\r\n  }\r\n}\r\n","export class Resource {\r\n  id: number;\r\n  parentId?: number;\r\n\r\n  constructor(values: Object = {}) {\r\n    Object.assign(this, values);\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\n\n\n@NgModule({\n  imports: [\n  ],\n  declarations: [],\n  exports: []\n})\nexport class NebbRestServiceModule { }\n","import { QueryBuilder } from './query-builder';\r\n\r\nexport class QueryOptions implements QueryBuilder {\r\n  public pageNumber: number;\r\n  public pageSize: number;\r\n\r\n  constructor() {\r\n    this.pageNumber = 1;\r\n    this.pageSize = 10000;\r\n  }\r\n\r\n  toQueryMap() {\r\n    const queryMap = new Map<string, string>();\r\n    queryMap.set('pageNumber', `${this.pageNumber}`);\r\n    queryMap.set('pageSize', `${this.pageSize}`);\r\n\r\n    return queryMap;\r\n  }\r\n\r\n  toQueryString() {\r\n    let queryString = '';\r\n    this.toQueryMap().forEach((value: string, key: string) => {\r\n      queryString = queryString.concat(`${key}=${value}&`);\r\n    });\r\n\r\n    return queryString.substring(0, queryString.length - 1);\r\n  }\r\n}\r\n"],"names":[],"mappings":"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"}
